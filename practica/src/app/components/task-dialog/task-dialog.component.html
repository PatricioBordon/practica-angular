<h2 mat-dialog-title>{{ isEdit ? 'Editar Tarea' : 'Nueva Tarea' }}</h2>

<mat-dialog-content class="mt-4">
  <div class="flex flex-col gap-4">
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Título</mat-label>
      <input matInput [(ngModel)]="title" required />
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Descripción</mat-label>
      <textarea matInput [(ngModel)]="description" rows="4"></textarea>
    </mat-form-field>

    <div class="my-6">
      <div class="flex justify-between items-center mb-2">
        <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Etiquetas</span>
        <button mat-button color="primary" class="!text-xs" (click)="openLabelManager()">
          Configurar
        </button>
      </div>

      <div class="label-grid custom-scroll">
        @for (label of availableLabels(); track label.id) {
        <div
          (click)="toggleLabel(label)"
          [class.selected]="selectedLabelIds.includes(label.id)"
          class="label-item bg-gray-50 hover:bg-gray-100"
        >
          <div class="color-dot" [style.background-color]="label.color"></div>
          <span class="text-sm font-medium text-gray-700 truncate">{{ label.name }}</span>
        </div>
        }
      </div>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  @if (isEdit) {
  <button mat-button color="warn" (click)="delete()">Eliminar</button>
  }
  <button mat-button (click)="dialogRef.close()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="save()">Guardar</button>
</mat-dialog-actions>
